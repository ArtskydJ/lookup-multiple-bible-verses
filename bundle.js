!function(){"use strict";function e(e){var a=e.default;if("function"==typeof a){var n=function(){return a.apply(this,arguments)};n.prototype=a.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})})),n}var a=e=>e instanceof RegExp?e.source:e;const n=a,s={"(":")","[":"]"};function t(e,a,n,s){return s===a?e+1:s===n?e-1:e}const r=function(e){const a=n(e);return/^\w$/.test(a)||function(e){const a=e[0],n=s[a];if(void 0===n||e[e.length-1]!==n)return!1;return!function(e,a,n){let s=0;for(let r=0;r<e.length-1;++r)if(s=t(s,a,n,e[r]),0===s)return!0;return!1}(e,a,n)}(a)},o=a,i=g(((...e)=>f(...e).join(""))),l=e=>r(e)?e:`(?:${o(e)})`,c=e=>e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"),m=(e,a,n)=>e instanceof RegExp?a(e):n(e),h=e=>m(e,(e=>e.source),c);var u={combine:i,either:d("(?:","|",")"),capture:d("(","",")"),flags:(e,...a)=>new RegExp(i(...a).source,e),anyNumber:v("*"),oneOrMore:v("+"),optional:v("?"),exactly:(e,...a)=>v(`{${e}}`)(...a),atLeast:(e,...a)=>v(`{${e},}`)(...a),between:(e,a,...n)=>v(`{${e},${a}}`)(...n),anyNumberNonGreedy:v("*?"),oneOrMoreNonGreedy:v("+?"),optionalNonGreedy:v("??"),exactlyNonGreedy:(e,...a)=>v(`{${e}}?`)(...a),atLeastNonGreedy:(e,...a)=>v(`{${e},}?`)(...a),betweenNonGreedy:(e,a,...n)=>v(`{${e},${a}}?`)(...n)};function p(e){return e.indexOf("|")>=0?l(e):e}function f(...e){return e.map(h).map(p)}function g(e){return(...a)=>m(e(...a),(e=>e),(e=>new RegExp(e)))}function d(e,a,n){return g(((...s)=>{const t=f(...s).join(a),o=r(t)?function(e){const a=/^\(\?:(.+)\)$/.exec(e);return a?a[1]:e}(t):t;return y(e,o,n)}))}function v(e){return g(((...a)=>y(l(i(...a)),e)))}function y(...e){return e.map(o).join("")}var b=[{name:"Genesis",aliases:["Gn","Gen"]},{name:"Exodus",aliases:["Exod","Ex","Exo"]},{name:"Leviticus",aliases:["Lv","Lev"]},{name:"Numbers",aliases:["Nu","Num","Numb"]},{name:"Deuteronomy",aliases:["Dt","Deut"]},{name:"Joshua",aliases:["Josh"]},{name:"Judges",aliases:["Judg"]},{name:"Ruth",aliases:[]},{name:"1 Samuel",aliases:["1 Sm","1 Sam","1st Sam","1st Samuel","First Samuel"]},{name:"2 Samuel",aliases:["2 Sm","2 Sam","2nd Sam","2nd Samuel","Second Samuel"]},{name:"1 Kings",aliases:["1 Ki","1 Kgs","1st Kgs","1st Kings","First Kings"]},{name:"2 Kings",aliases:["2 Ki","2 Kgs","2nd Kgs","2nd Kings","Second Kings"]},{name:"1 Chronicles",aliases:["1 Ch","1 Chr","1st Chr","1st Chronicles","First Chronicles"]},{name:"2 Chronicles",aliases:["2 Ch","2 Chr","2nd Chr","2nd Chronicles","Second Chronicles"]},{name:"Ezra",aliases:["Ezr"]},{name:"Nehemiah",aliases:["Ne","Neh"]},{name:"Esther",aliases:["Esth","Est"]},{name:"Job",aliases:[]},{name:"Psalms",aliases:["Ps","Pss","Psalm"]},{name:"Proverbs",aliases:["Prov","Pr","Pro"]},{name:"Ecclesiastes",aliases:["Eccl","Ec","Ecc"]},{name:"Song of Solomon",aliases:["Song","Song of Songs"]},{name:"Isaiah",aliases:["Is","Isa"]},{name:"Jeremiah",aliases:["Jer"]},{name:"Lamentations",aliases:["Lam"]},{name:"Ezekiel",aliases:["Ezk","Ezek"]},{name:"Daniel",aliases:["Dn","Dan"]},{name:"Hosea",aliases:["Ho","Hos"]},{name:"Joel",aliases:["Jl"]},{name:"Amos",aliases:["Am"]},{name:"Obadiah",aliases:["Obad","Ob","Oba"]},{name:"Jonah",aliases:["Jon"]},{name:"Micah",aliases:["Mc","Mi","Mic"]},{name:"Nahum",aliases:["Nah"]},{name:"Habakkuk",aliases:["Hab"]},{name:"Zephaniah",aliases:["Zp","Zeph"]},{name:"Haggai",aliases:["Hg","Hag"]},{name:"Zechariah",aliases:["Zc","Zech"]},{name:"Malachi",aliases:["Mal"]},{name:"Matthew",aliases:["Mt","Matt"]},{name:"Mark",aliases:["Mk"]},{name:"Luke",aliases:["Lk"]},{name:"John",aliases:["Jn"]},{name:"Acts",aliases:["Ac"]},{name:"Romans",aliases:["Ro","Rm","Rom"]},{name:"1 Corinthians",aliases:["1 Cor","1st Cor","1st Corinthians","First Corinthians"]},{name:"2 Corinthians",aliases:["2 Cor","2nd Cor","2nd Corinthians","Second Corinthians"]},{name:"Galatians",aliases:["Gal"]},{name:"Ephesians",aliases:["Eph"]},{name:"Philippians",aliases:["Ph","Phil"]},{name:"Colossians",aliases:["Col"]},{name:"1 Thessalonians",aliases:["1 Th","1 Thess","1st Thess","1st Thessalonians","First Thessalonians"]},{name:"2 Thessalonians",aliases:["2 Th","2 Thess","2nd Thess","2nd Thessalonians","Second Thessalonians"]},{name:"1 Timothy",aliases:["1 Tim","1st Tim","1st Timothy","First Timothy"]},{name:"2 Timothy",aliases:["2 Tim","2nd Tim","2nd Timothy","Second Timothy"]},{name:"Titus",aliases:["Tit"]},{name:"Philemon",aliases:["Phlm"]},{name:"Hebrews",aliases:["Heb"]},{name:"James",aliases:["Ja","Jas"]},{name:"1 Peter",aliases:["1 Pt","1 Pet","1st Pet","1st Peter","First Peter"]},{name:"2 Peter",aliases:["2 Pt","2 Pet","2nd Pet","2nd Peter","Second Peter"]},{name:"1 John",aliases:["1 Jn","1st John","First John"]},{name:"2 John",aliases:["2 Jn","2nd John","Second John"]},{name:"3 John",aliases:["3 Jn","3rd John","Third John"]},{name:"Jude",aliases:[]},{name:"Revelation",aliases:["Rv","Rev"]}];const{combine:w,flags:S,either:E,optional:J}=u;var P=function({requireVerse:e=!1,flags:a="i"}={}){const n=/(\d+)([a-z])?/,s=w(":",n),t=w(/(\d+)/,e?s:J(s)),r=w("-",E(/([a-z])/,/(\d+)([a-z])/,t,n));return S(a,t,J(r))};const C=function(e,a,n){var s=[];return Array.isArray(e)?(e.forEach((function(e,t,r){var o=a.call(n,e,t,r);Array.isArray(o)?s.push.apply(s,o):null!=o&&s.push(o)})),s):s},{either:$,capture:x,flags:T}=u,R=b,N=P;var k={exports:{}};const O=K(b),M=e=>((e,a)=>void 0===e?j(a):e)(e,null),j=e=>"function"==typeof e?e():e,L=e=>null===e?e:parseInt(e,10);function I(e,a){const n=a?K(a):O,[,s,t,r,o,...i]=e,l=i.filter((e=>void 0!==e)),c={chapter:L(M(t)),verse:L(M(r)),section:M(o)},m=(h=3===l.length,u=()=>{const[e,a,n]=l;return{chapter:L(e),verse:L(a),section:M(n)}},p=()=>{const{numbers:e,section:a}=function(e){const a=e[e.length-1];return e.length>0&&/[a-z]/.test(a)?{numbers:e.slice(0,e.length-1).map(L),section:a}:{numbers:e.map(L),section:null}}(l);if(2===e.length){const[n,s]=e;return{chapter:n,verse:s,section:a}}return 1===e.length?null===c.verse?{chapter:e[0],verse:null,section:a}:{chapter:c.chapter,verse:e[0],section:a}:{chapter:c.chapter,verse:c.verse,section:a||c.section}},j(h)?j(u):j(p));var h,u,p,f;return{book:n[(f=s,"."===f[f.length-1]?f.substr(0,f.length-1):f).toLowerCase()].name,start:c,end:m}}function K(e){return e.reduce(((e,a)=>(e[a.name.toLowerCase()]=a,a.aliases.forEach((n=>e[n.toLowerCase()]=a)),e)),Object.create(null))}k.exports=I,k.exports.chapterVerseRange=e=>{const[,...a]=e;return Object.assign(I([null,"",...a],[{name:"",aliases:[]}]),{book:null})};var G=Object.freeze({__proto__:null,createRegex:function({requireVerse:e=!1,flags:a="i",books:n=R}={}){const s=n.map((({name:e})=>e)),t=C(n,(({aliases:e})=>C(e,(e=>[e,e+"."])))),r=N({requireVerse:e,flags:a});return T(a,x($(...s,...t))," ",r)},extractRangeFromMatch:k.exports,createChapterVerseRangeRegex:P}),H=e(G);const{createRegex:_,createChapterVerseRangeRegex:z,extractRangeFromMatch:A}=H,F=_({flags:"gi"});const D=b,V=fetch("https://www.canonapi.com/v1/last_update.json").then((e=>e.text())).then((e=>{localStorage.getItem("last_update")!==e&&(localStorage.clear(),localStorage.setItem("last_update",e))}));function Z(e){return e.toLowerCase().replace(/ /g,"").trim()}async function q(e){const{book:a,start:n,end:s}=e,t=function(e,a){if(a<e)throw new RangeError("start must be less than end");return new Array(a-e+1).fill().map(((a,n)=>e+n))}(n.chapter,s.chapter),r=await Promise.all(t.map((async e=>{const{verses:t}=await function(e,a){const n=Z(e),s=D.find((({name:e,aliases:a})=>[e,...a].map(Z).includes(n))),t=s&&s.name;return V.then((()=>{if(t){const e=Z(t)+a,n=localStorage.getItem(e);return n?Promise.resolve({verses:JSON.parse(n),book_name:t}):fetch(`https://www.canonapi.com/v1/${Z(t)}/${a}.json`).then((e=>{if(!e.ok)throw new Error(`Invalid chapter: ${t} ${a}`);return e.text()})).then((a=>(localStorage.setItem(e,a),{verses:JSON.parse(a),book_name:t})))}return Promise.reject(new Error(`Invalid book: ${e}`))}))}(a,e);let r=0;n.chapter===e&&n.verse&&(r=n.verse-1);let o=1/0;if(s.chapter===e&&s.verse&&(o=s.verse),t.length<=r)throw new Error(`Invalid verse: ${a} ${e}:${r+1}`);if(t.length<o&&o!==1/0){const n=o>t.length+1?t.length+1+"-":"";throw new Error(`Invalid verse${n?"s":""}: ${a} ${e}:${n}${o}`)}return t.slice(r,o).join("")})));let o=a+" "+n.chapter;return n.verse&&(o+=":"+n.verse),n.chapter!==s.chapter?(o+="-"+s.chapter,s.verse&&(o+=":"+s.verse)):s.verse&&s.verse!==n.verse&&(o+="-"+s.verse),{reference:o,text:r.join("")}}const B=document.querySelector("textarea"),Q=document.querySelector("div.output");async function U(){const e=function(e){const a=[...e.matchAll(F)].map((e=>A(e)));return a.forEach((e=>{const{start:a,end:n}=e;if(n.chapter<a.chapter)throw new Error("invalid chapter range");if(n.chapter===a.chapter&&n.verse<a.verse)throw new Error("invalid verse range");console.log(JSON.stringify(e))})),a}(B.value),a=await Promise.all(e.map((async e=>{try{const{reference:a,text:n}=await q(e);return`<span class="verse"><span class="ref">${a}</span>${n}</span>`}catch(e){return`<span class="err">${e.message}</span>`}})));Q.innerHTML=a.join("")}B.oninput=U,U()}();
//# sourceMappingURL=bundle.js.map
